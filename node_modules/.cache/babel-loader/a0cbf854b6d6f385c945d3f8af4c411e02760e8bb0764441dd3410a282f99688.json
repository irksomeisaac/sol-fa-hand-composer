{"ast":null,"code":"// Kodály hand sign positions database\n// These are approximate positions that define each sign\nexport const kodalySigns = {\n  'do': {\n    description: 'Closed fist at waist level',\n    // Key landmark relationships for \"do\":\n    // - Fingers should be closed (all finger tips close to palm)\n    // - Hand should be roughly horizontal\n    keyFeatures: {\n      fingersClose: true,\n      palmFacing: 'up',\n      // Relative vertical position will be lower than other signs\n      relativeHeight: 'low'\n    }\n  },\n  're': {\n    description: 'Hand horizontal, fingers together pointing to the side',\n    keyFeatures: {\n      fingersExtended: true,\n      fingersTogether: true,\n      palmFacing: 'down',\n      handRotation: 'horizontal'\n    }\n  },\n  'mi': {\n    description: 'Hand horizontal, palm down',\n    keyFeatures: {\n      fingersExtended: true,\n      fingersTogether: true,\n      palmFacing: 'down',\n      handRotation: 'horizontal'\n    }\n  },\n  'fa': {\n    description: 'Fist with thumb pointing downward',\n    keyFeatures: {\n      fingersClose: true,\n      thumbExtended: true,\n      thumbDirection: 'down'\n    }\n  },\n  'sol': {\n    description: 'Hand pointing forward, palm facing left',\n    keyFeatures: {\n      fingersExtended: true,\n      fingersTogether: true,\n      palmFacing: 'side',\n      handDirection: 'forward'\n    }\n  },\n  'la': {\n    description: 'Hand relaxed, palm down, fingers slightly curved',\n    keyFeatures: {\n      fingersRelaxed: true,\n      palmFacing: 'down',\n      handRotation: 'horizontal'\n    }\n  },\n  'ti': {\n    description: 'Hand angled upward, fingers pointing up',\n    keyFeatures: {\n      fingersExtended: true,\n      fingersTogether: true,\n      handDirection: 'up'\n    }\n  }\n};\n\n// Helper functions to analyze hand landmarks\nconst analyzePalmFacing = landmarks => {\n  // Calculate palm normal vector using cross product of palm vectors\n  const wrist = landmarks[0];\n  const index_base = landmarks[5];\n  const pinky_base = landmarks[17];\n\n  // Vector from wrist to index base\n  const v1 = {\n    x: index_base.x - wrist.x,\n    y: index_base.y - wrist.y,\n    z: index_base.z - wrist.z\n  };\n\n  // Vector from wrist to pinky base\n  const v2 = {\n    x: pinky_base.x - wrist.x,\n    y: pinky_base.y - wrist.y,\n    z: pinky_base.z - wrist.z\n  };\n\n  // Cross product to get palm normal\n  const normal = {\n    x: v1.y * v2.z - v1.z * v2.y,\n    y: v1.z * v2.x - v1.x * v2.z,\n    z: v1.x * v2.y - v1.y * v2.x\n  };\n\n  // Normalize the vector\n  const magnitude = Math.sqrt(normal.x * normal.x + normal.y * normal.y + normal.z * normal.z);\n  normal.x /= magnitude;\n  normal.y /= magnitude;\n  normal.z /= magnitude;\n\n  // Determine palm facing direction based on normal vector\n  if (Math.abs(normal.z) > 0.7) {\n    return normal.z > 0 ? 'back' : 'front';\n  }\n  if (Math.abs(normal.y) > 0.7) {\n    return normal.y > 0 ? 'down' : 'up';\n  }\n  return 'side';\n};\nconst analyzeFingerExtension = landmarks => {\n  const fingerTips = [8, 12, 16, 20]; // Index, Middle, Ring, Pinky tips\n  const fingerBases = [5, 9, 13, 17]; // Corresponding bases\n  const extended = [];\n  for (let i = 0; i < fingerTips.length; i++) {\n    const tip = landmarks[fingerTips[i]];\n    const base = landmarks[fingerBases[i]];\n    const distance = Math.sqrt(Math.pow(tip.x - base.x, 2) + Math.pow(tip.y - base.y, 2) + Math.pow(tip.z - base.z, 2));\n    extended.push(distance > 0.1); // Threshold for considering finger extended\n  }\n  return extended;\n};\nconst analyzeHandDirection = landmarks => {\n  const wrist = landmarks[0];\n  const middleFinger = landmarks[12];\n  const direction = {\n    x: middleFinger.x - wrist.x,\n    y: middleFinger.y - wrist.y,\n    z: middleFinger.z - wrist.z\n  };\n\n  // Normalize\n  const magnitude = Math.sqrt(direction.x * direction.x + direction.y * direction.y + direction.z * direction.z);\n  direction.x /= magnitude;\n  direction.y /= magnitude;\n  direction.z /= magnitude;\n\n  // Determine primary direction\n  const absX = Math.abs(direction.x);\n  const absY = Math.abs(direction.y);\n  const absZ = Math.abs(direction.z);\n  if (absY > absX && absY > absZ) {\n    return direction.y > 0 ? 'down' : 'up';\n  }\n  if (absZ > absX && absZ > absY) {\n    return direction.z > 0 ? 'forward' : 'backward';\n  }\n  return 'side';\n};\nexport const analyzeHandPosition = landmarks => {\n  const palmFacing = analyzePalmFacing(landmarks);\n  const fingerExtension = analyzeFingerExtension(landmarks);\n  const handDirection = analyzeHandDirection(landmarks);\n  const allFingersExtended = fingerExtension.every(extended => extended);\n  const noFingersExtended = fingerExtension.every(extended => !extended);\n\n  // Analyze relative height (useful for 'do' position)\n  const relativeHeight = landmarks[0].y > 0.6 ? 'low' : 'high';\n  return {\n    palmFacing,\n    fingerExtension,\n    handDirection,\n    allFingersExtended,\n    noFingersExtended,\n    relativeHeight\n  };\n};\nexport const recognizeKodalySign = landmarks => {\n  const analysis = analyzeHandPosition(landmarks);\n  let bestMatch = null;\n  let highestScore = 0;\n  for (const [sign, data] of Object.entries(kodalySigns)) {\n    let score = 0;\n    const features = data.keyFeatures;\n\n    // Check each feature and accumulate score\n    if (features.fingersClose && analysis.noFingersExtended) score += 1;\n    if (features.fingersExtended && analysis.allFingersExtended) score += 1;\n    if (features.palmFacing === analysis.palmFacing) score += 1;\n    if (features.handDirection === analysis.handDirection) score += 1;\n    if (features.relativeHeight === analysis.relativeHeight) score += 1;\n\n    // Special case for 'do' position\n    if (sign === 'do' && analysis.relativeHeight === 'low' && analysis.noFingersExtended) {\n      score += 2;\n    }\n\n    // Special case for 'ti' position\n    if (sign === 'ti' && analysis.handDirection === 'up' && analysis.allFingersExtended) {\n      score += 2;\n    }\n    if (score > highestScore) {\n      highestScore = score;\n      bestMatch = sign;\n    }\n  }\n\n  // Only return a match if we're confident enough\n  return highestScore >= 2 ? bestMatch : null;\n};","map":{"version":3,"names":["kodalySigns","description","keyFeatures","fingersClose","palmFacing","relativeHeight","fingersExtended","fingersTogether","handRotation","thumbExtended","thumbDirection","handDirection","fingersRelaxed","analyzePalmFacing","landmarks","wrist","index_base","pinky_base","v1","x","y","z","v2","normal","magnitude","Math","sqrt","abs","analyzeFingerExtension","fingerTips","fingerBases","extended","i","length","tip","base","distance","pow","push","analyzeHandDirection","middleFinger","direction","absX","absY","absZ","analyzeHandPosition","fingerExtension","allFingersExtended","every","noFingersExtended","recognizeKodalySign","analysis","bestMatch","highestScore","sign","data","Object","entries","score","features"],"sources":["C:/Users/user/sol-fa-app/src/utils/kodalySignsDB.js"],"sourcesContent":["// Kodály hand sign positions database\r\n// These are approximate positions that define each sign\r\nexport const kodalySigns = {\r\n    'do': {\r\n        description: 'Closed fist at waist level',\r\n        // Key landmark relationships for \"do\":\r\n        // - Fingers should be closed (all finger tips close to palm)\r\n        // - Hand should be roughly horizontal\r\n        keyFeatures: {\r\n            fingersClose: true,\r\n            palmFacing: 'up',\r\n            // Relative vertical position will be lower than other signs\r\n            relativeHeight: 'low'\r\n        }\r\n    },\r\n    're': {\r\n        description: 'Hand horizontal, fingers together pointing to the side',\r\n        keyFeatures: {\r\n            fingersExtended: true,\r\n            fingersTogether: true,\r\n            palmFacing: 'down',\r\n            handRotation: 'horizontal'\r\n        }\r\n    },\r\n    'mi': {\r\n        description: 'Hand horizontal, palm down',\r\n        keyFeatures: {\r\n            fingersExtended: true,\r\n            fingersTogether: true,\r\n            palmFacing: 'down',\r\n            handRotation: 'horizontal'\r\n        }\r\n    },\r\n    'fa': {\r\n        description: 'Fist with thumb pointing downward',\r\n        keyFeatures: {\r\n            fingersClose: true,\r\n            thumbExtended: true,\r\n            thumbDirection: 'down'\r\n        }\r\n    },\r\n    'sol': {\r\n        description: 'Hand pointing forward, palm facing left',\r\n        keyFeatures: {\r\n            fingersExtended: true,\r\n            fingersTogether: true,\r\n            palmFacing: 'side',\r\n            handDirection: 'forward'\r\n        }\r\n    },\r\n    'la': {\r\n        description: 'Hand relaxed, palm down, fingers slightly curved',\r\n        keyFeatures: {\r\n            fingersRelaxed: true,\r\n            palmFacing: 'down',\r\n            handRotation: 'horizontal'\r\n        }\r\n    },\r\n    'ti': {\r\n        description: 'Hand angled upward, fingers pointing up',\r\n        keyFeatures: {\r\n            fingersExtended: true,\r\n            fingersTogether: true,\r\n            handDirection: 'up'\r\n        }\r\n    }\r\n};\r\n\r\n// Helper functions to analyze hand landmarks\r\nconst analyzePalmFacing = (landmarks) => {\r\n    // Calculate palm normal vector using cross product of palm vectors\r\n    const wrist = landmarks[0];\r\n    const index_base = landmarks[5];\r\n    const pinky_base = landmarks[17];\r\n    \r\n    // Vector from wrist to index base\r\n    const v1 = {\r\n        x: index_base.x - wrist.x,\r\n        y: index_base.y - wrist.y,\r\n        z: index_base.z - wrist.z\r\n    };\r\n    \r\n    // Vector from wrist to pinky base\r\n    const v2 = {\r\n        x: pinky_base.x - wrist.x,\r\n        y: pinky_base.y - wrist.y,\r\n        z: pinky_base.z - wrist.z\r\n    };\r\n    \r\n    // Cross product to get palm normal\r\n    const normal = {\r\n        x: v1.y * v2.z - v1.z * v2.y,\r\n        y: v1.z * v2.x - v1.x * v2.z,\r\n        z: v1.x * v2.y - v1.y * v2.x\r\n    };\r\n    \r\n    // Normalize the vector\r\n    const magnitude = Math.sqrt(normal.x * normal.x + normal.y * normal.y + normal.z * normal.z);\r\n    normal.x /= magnitude;\r\n    normal.y /= magnitude;\r\n    normal.z /= magnitude;\r\n    \r\n    // Determine palm facing direction based on normal vector\r\n    if (Math.abs(normal.z) > 0.7) {\r\n        return normal.z > 0 ? 'back' : 'front';\r\n    }\r\n    if (Math.abs(normal.y) > 0.7) {\r\n        return normal.y > 0 ? 'down' : 'up';\r\n    }\r\n    return 'side';\r\n};\r\n\r\nconst analyzeFingerExtension = (landmarks) => {\r\n    const fingerTips = [8, 12, 16, 20]; // Index, Middle, Ring, Pinky tips\r\n    const fingerBases = [5, 9, 13, 17]; // Corresponding bases\r\n    const extended = [];\r\n    \r\n    for (let i = 0; i < fingerTips.length; i++) {\r\n        const tip = landmarks[fingerTips[i]];\r\n        const base = landmarks[fingerBases[i]];\r\n        const distance = Math.sqrt(\r\n            Math.pow(tip.x - base.x, 2) +\r\n            Math.pow(tip.y - base.y, 2) +\r\n            Math.pow(tip.z - base.z, 2)\r\n        );\r\n        extended.push(distance > 0.1); // Threshold for considering finger extended\r\n    }\r\n    \r\n    return extended;\r\n};\r\n\r\nconst analyzeHandDirection = (landmarks) => {\r\n    const wrist = landmarks[0];\r\n    const middleFinger = landmarks[12];\r\n    \r\n    const direction = {\r\n        x: middleFinger.x - wrist.x,\r\n        y: middleFinger.y - wrist.y,\r\n        z: middleFinger.z - wrist.z\r\n    };\r\n    \r\n    // Normalize\r\n    const magnitude = Math.sqrt(direction.x * direction.x + direction.y * direction.y + direction.z * direction.z);\r\n    direction.x /= magnitude;\r\n    direction.y /= magnitude;\r\n    direction.z /= magnitude;\r\n    \r\n    // Determine primary direction\r\n    const absX = Math.abs(direction.x);\r\n    const absY = Math.abs(direction.y);\r\n    const absZ = Math.abs(direction.z);\r\n    \r\n    if (absY > absX && absY > absZ) {\r\n        return direction.y > 0 ? 'down' : 'up';\r\n    }\r\n    if (absZ > absX && absZ > absY) {\r\n        return direction.z > 0 ? 'forward' : 'backward';\r\n    }\r\n    return 'side';\r\n};\r\n\r\nexport const analyzeHandPosition = (landmarks) => {\r\n    const palmFacing = analyzePalmFacing(landmarks);\r\n    const fingerExtension = analyzeFingerExtension(landmarks);\r\n    const handDirection = analyzeHandDirection(landmarks);\r\n    const allFingersExtended = fingerExtension.every(extended => extended);\r\n    const noFingersExtended = fingerExtension.every(extended => !extended);\r\n    \r\n    // Analyze relative height (useful for 'do' position)\r\n    const relativeHeight = landmarks[0].y > 0.6 ? 'low' : 'high';\r\n    \r\n    return {\r\n        palmFacing,\r\n        fingerExtension,\r\n        handDirection,\r\n        allFingersExtended,\r\n        noFingersExtended,\r\n        relativeHeight\r\n    };\r\n};\r\n\r\nexport const recognizeKodalySign = (landmarks) => {\r\n    const analysis = analyzeHandPosition(landmarks);\r\n    let bestMatch = null;\r\n    let highestScore = 0;\r\n    \r\n    for (const [sign, data] of Object.entries(kodalySigns)) {\r\n        let score = 0;\r\n        const features = data.keyFeatures;\r\n        \r\n        // Check each feature and accumulate score\r\n        if (features.fingersClose && analysis.noFingersExtended) score += 1;\r\n        if (features.fingersExtended && analysis.allFingersExtended) score += 1;\r\n        if (features.palmFacing === analysis.palmFacing) score += 1;\r\n        if (features.handDirection === analysis.handDirection) score += 1;\r\n        if (features.relativeHeight === analysis.relativeHeight) score += 1;\r\n        \r\n        // Special case for 'do' position\r\n        if (sign === 'do' && analysis.relativeHeight === 'low' && analysis.noFingersExtended) {\r\n            score += 2;\r\n        }\r\n        \r\n        // Special case for 'ti' position\r\n        if (sign === 'ti' && analysis.handDirection === 'up' && analysis.allFingersExtended) {\r\n            score += 2;\r\n        }\r\n        \r\n        if (score > highestScore) {\r\n            highestScore = score;\r\n            bestMatch = sign;\r\n        }\r\n    }\r\n    \r\n    // Only return a match if we're confident enough\r\n    return highestScore >= 2 ? bestMatch : null;\r\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}