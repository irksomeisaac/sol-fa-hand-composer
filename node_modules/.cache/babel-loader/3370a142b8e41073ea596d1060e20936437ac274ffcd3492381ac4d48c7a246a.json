{"ast":null,"code":"// ... (keep all the helper functions the same until the recognizeKodalySign function)\n\nexport function recognizeKodalySign(landmarks) {\n  if (!landmarks || landmarks.length < 21) return null;\n  const fingers = analyzeFingers(landmarks);\n  const handDir = getHandDirection(landmarks);\n  const palmDir = getPalmDirection(landmarks);\n\n  // Calculate thumb direction specifically (for Fa)\n  const thumbDir = {\n    x: landmarks[4].x - landmarks[1].x,\n    // Thumb tip to thumb base\n    y: landmarks[4].y - landmarks[1].y,\n    z: landmarks[4].z - landmarks[1].z\n  };\n  const thumbAngle = Math.atan2(-thumbDir.y, Math.sqrt(thumbDir.x * thumbDir.x + thumbDir.z * thumbDir.z)) * (180 / Math.PI);\n\n  // Debug info\n  const debug = {\n    extensions: fingers.values,\n    handDirection: {\n      verticalAngle: handDir.verticalAngle,\n      isPointingUp: handDir.isPointingUp,\n      isPointingDown: handDir.isPointingDown,\n      isPointingForward: handDir.isPointingForward,\n      isHorizontal: handDir.isHorizontal\n    },\n    palmOrientation: {\n      isDown: palmDir.isDown,\n      isUp: palmDir.isUp,\n      isSide: palmDir.isSide\n    },\n    thumbAngle: thumbAngle\n  };\n  let sign = null;\n  let confidence = 0;\n\n  // Log current values for debugging\n  console.log('Hand state:', {\n    fingerValues: fingers.values,\n    handAngle: handDir.verticalAngle,\n    palmDirection: palmDir,\n    thumbAngle: thumbAngle\n  });\n\n  // DO - Tight fist\n  if (fingers.values.thumb < 0.4 && fingers.values.index < 0.4 && fingers.values.middle < 0.4 && fingers.values.ring < 0.4 && fingers.values.pinky < 0.4) {\n    sign = 'do';\n    confidence = 0.9;\n  }\n\n  // RE - Angled up, fingers together\n  else if (fingers.values.index > 0.7 && fingers.values.middle > 0.7 && fingers.values.ring > 0.7 && fingers.values.pinky > 0.7 && handDir.verticalAngle > 20 && handDir.verticalAngle < 70) {\n    sign = 're';\n    confidence = 0.9;\n  }\n\n  // MI - Completely flat hand\n  else if (fingers.values.index > 0.8 && fingers.values.middle > 0.8 && fingers.values.ring > 0.8 && fingers.values.pinky > 0.8 && Math.abs(handDir.verticalAngle) < 20 && palmDir.isDown) {\n    sign = 'mi';\n    confidence = 0.9;\n  }\n\n  // FA - Thumb pointing down, other fingers in fist\n  else if (fingers.values.thumb > 0.6 &&\n  // Thumb extended\n  fingers.values.index < 0.4 &&\n  // Other fingers in tight fist\n  fingers.values.middle < 0.4 && fingers.values.ring < 0.4 && fingers.values.pinky < 0.4 && thumbAngle < -45) {\n    // Thumb pointing downward\n    sign = 'fa';\n    confidence = 0.9;\n  }\n\n  // SOL - Curved fingers to side, back of hand visible\n  else if (fingers.values.index > 0.4 && fingers.values.index < 0.8 && fingers.values.middle > 0.4 && fingers.values.middle < 0.8 && fingers.values.ring > 0.4 && fingers.values.ring < 0.8 && fingers.values.pinky > 0.4 && fingers.values.pinky < 0.8 && Math.abs(handDir.direction.x) > 0.7 && palmDir.isSide) {\n    sign = 'sol';\n    confidence = 0.9;\n  }\n\n  // LA - Curved fingers, palm down\n  else if (fingers.values.index > 0.4 && fingers.values.index < 0.7 && fingers.values.middle > 0.4 && fingers.values.middle < 0.7 && fingers.values.ring > 0.4 && fingers.values.ring < 0.7 && fingers.values.pinky > 0.4 && fingers.values.pinky < 0.7 && palmDir.isDown) {\n    sign = 'la';\n    confidence = 0.9;\n  }\n\n  // TI - Index up, others closed\n  else if (fingers.values.index > 0.8 && fingers.values.middle < 0.4 && fingers.values.ring < 0.4 && fingers.values.pinky < 0.4 && handDir.isPointingUp) {\n    sign = 'ti';\n    confidence = 0.9;\n  }\n  if (sign) {\n    console.log('Detected:', sign, 'with confidence:', confidence);\n  }\n  return {\n    sign,\n    confidence,\n    debug\n  };\n}","map":{"version":3,"names":["recognizeKodalySign","landmarks","length","fingers","analyzeFingers","handDir","getHandDirection","palmDir","getPalmDirection","thumbDir","x","y","z","thumbAngle","Math","atan2","sqrt","PI","debug","extensions","values","handDirection","verticalAngle","isPointingUp","isPointingDown","isPointingForward","isHorizontal","palmOrientation","isDown","isUp","isSide","sign","confidence","console","log","fingerValues","handAngle","palmDirection","thumb","index","middle","ring","pinky","abs","direction"],"sources":["C:/Users/user/sol-fa-app/src/utils/kodalySignsDB.js"],"sourcesContent":["// ... (keep all the helper functions the same until the recognizeKodalySign function)\r\n\r\nexport function recognizeKodalySign(landmarks) {\r\n    if (!landmarks || landmarks.length < 21) return null;\r\n\r\n    const fingers = analyzeFingers(landmarks);\r\n    const handDir = getHandDirection(landmarks);\r\n    const palmDir = getPalmDirection(landmarks);\r\n\r\n    // Calculate thumb direction specifically (for Fa)\r\n    const thumbDir = {\r\n        x: landmarks[4].x - landmarks[1].x,  // Thumb tip to thumb base\r\n        y: landmarks[4].y - landmarks[1].y,\r\n        z: landmarks[4].z - landmarks[1].z\r\n    };\r\n    const thumbAngle = Math.atan2(-thumbDir.y, Math.sqrt(thumbDir.x * thumbDir.x + thumbDir.z * thumbDir.z)) * (180 / Math.PI);\r\n\r\n    // Debug info\r\n    const debug = {\r\n        extensions: fingers.values,\r\n        handDirection: {\r\n            verticalAngle: handDir.verticalAngle,\r\n            isPointingUp: handDir.isPointingUp,\r\n            isPointingDown: handDir.isPointingDown,\r\n            isPointingForward: handDir.isPointingForward,\r\n            isHorizontal: handDir.isHorizontal\r\n        },\r\n        palmOrientation: {\r\n            isDown: palmDir.isDown,\r\n            isUp: palmDir.isUp,\r\n            isSide: palmDir.isSide\r\n        },\r\n        thumbAngle: thumbAngle\r\n    };\r\n\r\n    let sign = null;\r\n    let confidence = 0;\r\n\r\n    // Log current values for debugging\r\n    console.log('Hand state:', {\r\n        fingerValues: fingers.values,\r\n        handAngle: handDir.verticalAngle,\r\n        palmDirection: palmDir,\r\n        thumbAngle: thumbAngle\r\n    });\r\n\r\n    // DO - Tight fist\r\n    if (fingers.values.thumb < 0.4 &&    \r\n        fingers.values.index < 0.4 &&\r\n        fingers.values.middle < 0.4 &&\r\n        fingers.values.ring < 0.4 &&\r\n        fingers.values.pinky < 0.4) {\r\n        sign = 'do';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // RE - Angled up, fingers together\r\n    else if (fingers.values.index > 0.7 &&     \r\n             fingers.values.middle > 0.7 &&\r\n             fingers.values.ring > 0.7 &&\r\n             fingers.values.pinky > 0.7 &&\r\n             handDir.verticalAngle > 20 &&     \r\n             handDir.verticalAngle < 70) {\r\n        sign = 're';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // MI - Completely flat hand\r\n    else if (fingers.values.index > 0.8 &&     \r\n             fingers.values.middle > 0.8 &&\r\n             fingers.values.ring > 0.8 &&\r\n             fingers.values.pinky > 0.8 &&\r\n             Math.abs(handDir.verticalAngle) < 20 && \r\n             palmDir.isDown) {\r\n        sign = 'mi';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // FA - Thumb pointing down, other fingers in fist\r\n    else if (fingers.values.thumb > 0.6 &&     // Thumb extended\r\n             fingers.values.index < 0.4 &&      // Other fingers in tight fist\r\n             fingers.values.middle < 0.4 &&\r\n             fingers.values.ring < 0.4 &&\r\n             fingers.values.pinky < 0.4 &&\r\n             thumbAngle < -45) {                // Thumb pointing downward\r\n        sign = 'fa';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // SOL - Curved fingers to side, back of hand visible\r\n    else if (fingers.values.index > 0.4 &&     \r\n             fingers.values.index < 0.8 &&     \r\n             fingers.values.middle > 0.4 &&\r\n             fingers.values.middle < 0.8 &&\r\n             fingers.values.ring > 0.4 &&\r\n             fingers.values.ring < 0.8 &&\r\n             fingers.values.pinky > 0.4 &&\r\n             fingers.values.pinky < 0.8 &&\r\n             Math.abs(handDir.direction.x) > 0.7 && \r\n             palmDir.isSide) {\r\n        sign = 'sol';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // LA - Curved fingers, palm down\r\n    else if (fingers.values.index > 0.4 &&     \r\n             fingers.values.index < 0.7 &&     \r\n             fingers.values.middle > 0.4 &&\r\n             fingers.values.middle < 0.7 &&\r\n             fingers.values.ring > 0.4 &&\r\n             fingers.values.ring < 0.7 &&\r\n             fingers.values.pinky > 0.4 &&\r\n             fingers.values.pinky < 0.7 &&\r\n             palmDir.isDown) {\r\n        sign = 'la';\r\n        confidence = 0.9;\r\n    }\r\n    \r\n    // TI - Index up, others closed\r\n    else if (fingers.values.index > 0.8 &&     \r\n             fingers.values.middle < 0.4 &&     \r\n             fingers.values.ring < 0.4 &&\r\n             fingers.values.pinky < 0.4 &&\r\n             handDir.isPointingUp) {\r\n        sign = 'ti';\r\n        confidence = 0.9;\r\n    }\r\n\r\n    if (sign) {\r\n        console.log('Detected:', sign, 'with confidence:', confidence);\r\n    }\r\n\r\n    return {\r\n        sign,\r\n        confidence,\r\n        debug\r\n    };\r\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}